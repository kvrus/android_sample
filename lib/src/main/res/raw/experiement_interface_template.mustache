package ru.koss.lib

import ru.koss.lib.config.ABConfig
{{#experimentInterfaces}}
import ru.koss.lib.tests.{{experimentName}}
{{/experimentInterfaces}}
/**
* THIS CODE WAS AUTOGENERATED
* YOU CANNOT MODIFY THIS FILE.
*/
class ABRepositoryImpl(private val version: String, private val config: ABConfig) : ABRepository {

init {
if(version != "{{experimentsVersion}}") {
throw IllegalStateException("Please check your AB testing configuration seems like you forgot to update code with new tests changes !")
}
}

{{#experimentInterfaces}}
override fun get{{experimentName}}(): {{experimentName}} {
val value = config.getValue({{experimentName}}.DEF_EXPERIMENT.getExperimentKey(),"")
return when (value) {
{{#experiemntVariants}}
{{experimentName}}.{{experimentVariantName}}.getExperimentValue() -> {{experimentName}}.{{experimentVariantName}}
{{/experimentVariants}}
else -> {{experimentName}}.DEF_EXPERIMENT
}
}
{{/experimentInterfaces}}

}